{"remainingRequest":"/home/codex/backup/local-food-service (copy)/client/node_modules/babel-loader/lib/index.js!/home/codex/backup/local-food-service (copy)/client/node_modules/eslint-loader/index.js??ref--13-0!/home/codex/backup/local-food-service (copy)/client/src/store/modules/user.js","dependencies":[{"path":"/home/codex/backup/local-food-service (copy)/client/src/store/modules/user.js","mtime":1628671200990},{"path":"/home/codex/backup/local-food-service (copy)/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/codex/backup/local-food-service (copy)/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/codex/backup/local-food-service (copy)/client/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL2NvZGV4L2JhY2t1cC9sb2NhbC1mb29kLXNlcnZpY2UgKGNvcHkpL2NsaWVudC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgc2V0V2l0aEV4cGlyeSB9IGZyb20gJy4uLy4uL2hlbHBlcnMvaGVscGVycyc7CmltcG9ydCByZXF1ZXN0cyBmcm9tICcuLi8uLi9zZXJ2aWNlcy9yZXF1ZXN0cyc7CnZhciB1c2VyID0gewogIHN0YXRlOiB7CiAgICBjdXJyZW50VXNlcjogbnVsbCwKICAgIGN1cnJlbnRDb29yZGluYXRlczogewogICAgICBsYXQ6IDAsCiAgICAgIGxuZzogMAogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICB1cGRhdGVDdXJyZW50VXNlcjogZnVuY3Rpb24gdXBkYXRlQ3VycmVudFVzZXIoc3RhdGUsIHVzZXIpIHsKICAgICAgc3RhdGUuY3VycmVudFVzZXIgPSB1c2VyOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KHN0YXRlKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd0b2tlbicpOwogICAgICBzdGF0ZS5jdXJyZW50VXNlciA9IHt9OwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgcmVnaXN0cmF0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVnaXN0cmF0aW9uID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKF9yZWYsIG5ld1VzZXIpIHsKICAgICAgICB2YXIgZGlzcGF0Y2gsIHJlc3BvbnNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3RzLnJlZ2lzdHJhdGlvbihuZXdVc2VyKTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAxKSBkaXNwYXRjaCgnYXV0aG9yaXphdGlvbicsIHsKICAgICAgICAgICAgICAgICAgZW1haWw6IG5ld1VzZXIgPT09IG51bGwgfHwgbmV3VXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmV3VXNlci5lbWFpbCwKICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IG5ld1VzZXIgPT09IG51bGwgfHwgbmV3VXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbmV3VXNlci5wYXNzd29yZAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiByZWdpc3RyYXRpb24oX3gsIF94MikgewogICAgICAgIHJldHVybiBfcmVnaXN0cmF0aW9uLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiByZWdpc3RyYXRpb247CiAgICB9KCksCiAgICBhdXRob3JpemF0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfYXV0aG9yaXphdGlvbiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoX3JlZjIsIHVzZXJEYXRhKSB7CiAgICAgICAgdmFyIF9kYXRhJHVzZXIsIF9kYXRhJHVzZXIyLCBfZGF0YSR1c2VyMywgX2RhdGEkdXNlcjQsIF9kYXRhJHVzZXI1OwoKICAgICAgICB2YXIgY29tbWl0LCBfeWllbGQkcmVxdWVzdHMkYXV0aG8sIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMi5jb21taXQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdHMuYXV0aG9yaXphdGlvbih1c2VyRGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIF95aWVsZCRyZXF1ZXN0cyRhdXRobyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRyZXF1ZXN0cyRhdXRoby5kYXRhOwogICAgICAgICAgICAgICAgc2V0V2l0aEV4cGlyeSgndG9rZW4nLCBkYXRhLnRva2VuKTsKICAgICAgICAgICAgICAgIGNvbW1pdCgndXBkYXRlQ3VycmVudFVzZXInLCB7CiAgICAgICAgICAgICAgICAgIGlkOiBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfZGF0YSR1c2VyID0gZGF0YS51c2VyKSA9PT0gbnVsbCB8fCBfZGF0YSR1c2VyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF0YSR1c2VyLl9pZCwKICAgICAgICAgICAgICAgICAgZW1haWw6IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXRhJHVzZXIyID0gZGF0YS51c2VyKSA9PT0gbnVsbCB8fCBfZGF0YSR1c2VyMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RhdGEkdXNlcjIuZW1haWwsCiAgICAgICAgICAgICAgICAgIGNvdW50cnk6IGRhdGEgPT09IG51bGwgfHwgZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogKF9kYXRhJHVzZXIzID0gZGF0YS51c2VyKSA9PT0gbnVsbCB8fCBfZGF0YSR1c2VyMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2RhdGEkdXNlcjMuY291bnRyeSwKICAgICAgICAgICAgICAgICAgY2l0eTogZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RhdGEkdXNlcjQgPSBkYXRhLnVzZXIpID09PSBudWxsIHx8IF9kYXRhJHVzZXI0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF0YSR1c2VyNC5jaXR5LAogICAgICAgICAgICAgICAgICBhY2NvdW50VHlwZTogZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX2RhdGEkdXNlcjUgPSBkYXRhLnVzZXIpID09PSBudWxsIHx8IF9kYXRhJHVzZXI1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZGF0YSR1c2VyNS5hY2NvdW50VHlwZQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGF1dGhvcml6YXRpb24oX3gzLCBfeDQpIHsKICAgICAgICByZXR1cm4gX2F1dGhvcml6YXRpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGF1dGhvcml6YXRpb247CiAgICB9KCksCiAgICBmZXRjaEN1cnJlbnRVc2VyOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZmV0Y2hDdXJyZW50VXNlciA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoX3JlZjMpIHsKICAgICAgICB2YXIgY29tbWl0LCBfeWllbGQkcmVxdWVzdHMkZ2V0VXMsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBjb21taXQgPSBfcmVmMy5jb21taXQ7CiAgICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDE7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVxdWVzdHMuZ2V0VXNlcigpOwoKICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICBfeWllbGQkcmVxdWVzdHMkZ2V0VXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgIGRhdGEgPSBfeWllbGQkcmVxdWVzdHMkZ2V0VXMuZGF0YTsKICAgICAgICAgICAgICAgIGNvbW1pdCgndXBkYXRlQ3VycmVudFVzZXInLCBkYXRhID09PSBudWxsIHx8IGRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRhdGEudXNlcik7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gOTsKICAgICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSgxKTsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndXNlci5qcyBmZXRjaEN1cnJlbnRVc2VyKCkgfCAnLCBfY29udGV4dDMudDApOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUzLCBudWxsLCBbWzEsIDldXSk7CiAgICAgIH0pKTsKCiAgICAgIGZ1bmN0aW9uIGZldGNoQ3VycmVudFVzZXIoX3g1KSB7CiAgICAgICAgcmV0dXJuIF9mZXRjaEN1cnJlbnRVc2VyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmZXRjaEN1cnJlbnRVc2VyOwogICAgfSgpCiAgfSwKICBnZXR0ZXJzOiB7CiAgICB1c2VyOiBmdW5jdGlvbiB1c2VyKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5jdXJyZW50VXNlcjsKICAgIH0KICB9Cn07CmV4cG9ydCBkZWZhdWx0IHVzZXI7"},{"version":3,"sources":["/home/codex/backup/local-food-service (copy)/client/src/store/modules/user.js"],"names":["setWithExpiry","requests","user","state","currentUser","currentCoordinates","lat","lng","mutations","updateCurrentUser","logout","localStorage","removeItem","actions","registration","newUser","dispatch","response","status","email","password","authorization","userData","commit","data","token","id","_id","country","city","accountType","fetchCurrentUser","getUser","Error","getters"],"mappings":"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","sourcesContent":["import { setWithExpiry } from '../../helpers/helpers';\nimport requests from '../../services/requests';\n\nconst user = {\n  state: {\n    currentUser: null,\n    currentCoordinates: {\n      lat: 0,\n      lng: 0,\n    },\n  },\n  mutations: {\n    updateCurrentUser: function (state, user) {\n      state.currentUser = user;\n    },\n    logout: function (state) {\n      localStorage.removeItem('token');\n      state.currentUser = {};\n    },\n  },\n  actions: {\n    registration: async function ({ dispatch }, newUser) {\n      const response = await requests.registration(newUser);\n      if (response.status === 201)\n        dispatch('authorization', {\n          email: newUser?.email,\n          password: newUser?.password,\n        });\n    },\n    authorization: async function ({ commit }, userData) {\n      const { data } = await requests.authorization(userData);\n      setWithExpiry('token', data.token);\n      commit('updateCurrentUser', {\n        id: data?.user?._id,\n        email: data?.user?.email,\n        country: data?.user?.country,\n        city: data?.user?.city,\n        accountType: data?.user?.accountType,\n      });\n    },\n    fetchCurrentUser: async function ({ commit }) {\n      try {\n        const { data } = await requests.getUser();\n        commit('updateCurrentUser', data?.user);\n      } catch (error) {\n        throw new Error('user.js fetchCurrentUser() | ', error);\n      }\n    },\n  },\n  getters: {\n    user: state => state.currentUser,\n  },\n};\n\nexport default user;\n"]}]}